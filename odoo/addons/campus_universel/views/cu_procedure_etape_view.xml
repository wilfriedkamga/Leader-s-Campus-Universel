<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="cu_procedure_etape_action" model="ir.actions.act_window">
        <field name="name">Étapes</field>
        <field name="res_model">campus_universel.procedure.etape</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[('procedure_id', '=', active_id)]</field>
        <field name="context">{'default_procedure_id': active_id}</field>
        <field name="help" type="html">
            <p>Cliquez ici pour ajouter une nouvelle Étapes.</p>
        </field>
    </record>
    
     <record id="cu_procedure_etape_action2" model="ir.actions.act_window">
        <field name="name">Étapes</field>
        <field name="res_model">campus_universel.procedure.etape</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="domain">[]</field>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p>Cliquez ici pour ajouter une nouvelle Étapes.</p>
        </field>
    </record>

    <record id="cu_procedure_etape_list" model="ir.ui.view">
        <field name="name">cu_procedure_etape.liste</field>
        <field name="model">campus_universel.procedure.etape</field>
        <field name="arch" type="xml">
            <list string="" default_group_by='phase_id'>
                <field name="name" />
                <field name="phase_id" />
                <field name="procedure_id" context="{'default_procedure_id': parent.procedure_id}" />
                <field name="state" />
                <field name='progress' />
            </list>
        </field>
    </record>

    <record id="cu_procedure_etape_form" model="ir.ui.view">
    <field name="name">cu_procedure_etape.form</field>
    <field name="model">campus_universel.procedure.etape</field>
    <field name="arch" type="xml">
        <form string="Étape de procédure">
            <header>
            </header>
            <sheet>
                <group>
                    <field name="name"/>
                    <field name="phase_id"/>
                    <field name="state"/>
                    <field name="procedure_id"/>
                    <field name="progress" widget="progressbar"/>
                </group>

                <notebook>
                    <!-- Onglet Documents -->
                    <page string="Documents">
                        <field name="document_ids">
                            <list editable="bottom">
                                <field name="name"/>
                                <field name="provenance"/>
                                <field name="category"/>
                                <field name="extension"/>
                                <field name="url"/>
                            </list>
                        </field>
                    </page>

                    <!-- Onglet Actions -->
                    <page string="Actions">
                        <field name="action_ids">
                            <list>
                                <field name="name"/>
                                <field name="description"/>
                            </list>
                        </field>
                    </page>

                     <page string="Transactions">
                        <field name="transaction_ids">
                            <list editable="bottom">
                                <field name="name" string="Description"/>
                                <field name="amount" string="Montant"/>
                                <field name="type" string="Type"/>
                                <field name="payment_operation_id" string="Opération financière"/>
                            </list>
                        </field>
                    </page>
                </notebook>

            </sheet>
        </form>
    </field>
</record>


    <record id="cu_procedure_list" model="ir.ui.view">
        <field name="name">cu_procedure.liste</field>
        <field name="model">campus_universel.procedure</field>
        <field name="arch" type="xml">
            <list string="Procédures">
                <field name="name" />
            </list>
        </field>
    </record>

    <record id="cu_procedure_etape_kanban" model="ir.ui.view">
        <field name="name">cu_procedure_etape.kanban</field>
        <field name="model">campus_universel.procedure.etape</field>
        <field name="arch" type="xml">

            <kanban highlight_color='color' default_group_by='phase_id'>
                <progressbar field="state" sum_field=""
                    colors='{"on_track": "success", "at_risk": "warning", "off_track": "danger", "on_hold": "info", "done": "purple"}' />

                <templates>
                    <t t-name="kanban-box">
                        
                            <div class='oe_kanban_global_click'>
                                <field name="name" />
                                <field name="state" />
                                <button type="button"
                                    name='delete'
                                    class="btn btn-danger btn-sm o_delete_kanban"
                                    t-att-data-id="record.id.raw"
                                    title="Supprimer">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>
</odoo>